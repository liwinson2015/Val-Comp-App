/* Compact losers bracket, aligned + styled to match winners bracket */

.lbViewport {
  /* column + gap */
  --colw: clamp(120px, 9vw, 150px);
  --gap: clamp(18px, 2.2vw, 26px);

  /* match box geometry */
  --slotH: 32px;
  --pairGapInside: 10px;
  --pairPad: 4px;
  --pairH: calc(var(--slotH) * 2 + var(--pairGapInside) + var(--pairPad) * 2);

  /* vertical rhythm â€“ these control spacing between rounds */
  --r1Space: 16px;
  --r2Space: calc(var(--pairH) + var(--r1Space) * 2);
  --r3Space: calc(var(--pairH) + var(--r2Space) * 2);
  --r4Space: calc(var(--pairH) + var(--r3Space) * 2);

  /* line + join geometry */
  --line: #293247;
  --joinW: 2px;
  --stub: 10px;
  --arm: calc(var(--gap) - var(--stub));

  /* slot styling (dark theme) */
  --slotBg: #111827;
  --slotBorder: #374151;
  --slotBorderStrong: #4b5563;
  --textBright: #e5e7eb;
  --textDim: #9ca3af;

  /* canvas size (7 columns: R1, R2, R3A, R3B, R4, LB Final, Winner) */
  --stageW: calc(var(--colw) * 7 + var(--gap) * 6);
  --stageH: calc(
    var(--pairH) * 4 + var(--r1Space) + var(--r2Space) + var(--r3Space) +
      var(--r4Space) + 80px
  );

  /* scale to viewport */
  --topSpace: 120px;
  --fitW: calc(100vw / var(--stageW));
  --fitH: calc((100vh - var(--topSpace)) / var(--stageH));
  --scale: min(1, var(--fitW), var(--fitH));

  width: 100%;
  height: calc(100vh - var(--topSpace));
  display: grid;
  place-items: center;
  overflow: visible;
}

.lbStage {
  width: var(--stageW);
  height: var(--stageH);
  transform: scale(var(--scale));
  transform-origin: top center;
}

.lbGrid {
  width: 100%;
  height: 100%;
  display: grid;
  grid-template-columns: repeat(7, var(--colw));
  gap: var(--gap);
  align-items: flex-start;
}

/* rounds / titles */

.round {
  position: relative;
}

.roundTitle {
  color: #dfe6f3;
  font-weight: 900;
  font-size: 12px;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  margin-bottom: 8px;
  opacity: 0.9;
}

.stack {
  position: relative;
  display: grid;
}

/* spacing per round
   R1 is the base. Other rounds use progressively larger "spaces"
   so the collectors line up with the previous column. */

.r1 .pair {
  margin: calc(var(--r1Space) / 2) 0;
}

/* R2 centers *between* R1 pairs */
.r2 .pair {
  margin: calc(var(--r2Space) / 2) 0;
}

/* R3A / R3B sit between the R2 matches that feed them */
.r3a .pair,
.r3b .pair {
  margin: calc(var(--r3Space) / 2) 0;
}

/* Round 4 higher up (winner of LB R3 vs WB R3 loser) */
.r4 .pair {
  margin: calc(var(--r4Space) / 2) 0;
}

/* LB Final pulled a bit lower for visual balance */
.rFinal .pair {
  margin: calc((var(--r4Space) + var(--pairH)) / 2) 0;
}

/* pair / slots */

.pair {
  position: relative;
  padding: var(--pairPad) 0;
}

/* little stub going to the right (into next column) */
.pair::after {
  content: "";
  position: absolute;
  top: 50%;
  right: calc(var(--stub) * -1);
  transform: translateY(-50%);
  width: var(--stub);
  height: var(--joinW);
  background: var(--line);
}

.slot {
  height: var(--slotH);
  border: 2px solid var(--slotBorder);
  border-radius: 6px;
  background: radial-gradient(circle at top left, #1f2937, #020617);
  display: flex;
  align-items: center;
  padding: 0 10px;
  box-shadow: 0 8px 18px rgba(0, 0, 0, 0.6);
}

.slot + .slot {
  margin-top: var(--pairGapInside);
}

.label {
  color: var(--textBright);
  font-weight: 700;
  font-size: 13px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* placeholders like "TBD" appear a bit dimmer */
.slot[title="TBD"] .label,
.slot[title="TBD "] .label {
  color: var(--textDim);
  font-weight: 500;
}

/* collectors + arms for rounds that feed from previous column */

.r2 .pair,
.r3a .pair,
.r3b .pair,
.r4 .pair,
.rFinal .pair {
  background-image: linear-gradient(var(--line), var(--line)),
    linear-gradient(var(--line), var(--line));
  background-repeat: no-repeat, no-repeat;
  background-size: var(--joinW) calc(var(--slotH) + var(--pairGapInside)),
    var(--arm) var(--joinW);
  background-position: left calc(var(--gap) * -1 + var(--arm)) 50%,
    left calc(var(--gap) * -1) 50%;
}

/* LB winner column */

.lbWinnerCol {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
}

.lbWinnerTitle {
  color: #dfe6f3;
  font-weight: 900;
  font-size: 12px;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  margin-bottom: 8px;
}

.lbWinnerPill {
  min-width: var(--colw);
  background: radial-gradient(circle at top left, #1f2937, #020617);
  border: 2px solid #4b5563;
  color: #ffffff;
  border-radius: 999px;
  padding: 10px 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 12px 30px rgba(15, 23, 42, 0.9);
}

.lbWinnerText {
  font-weight: 800;
  font-size: 14px;
  letter-spacing: 0.04em;
}
