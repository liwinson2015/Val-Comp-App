/* Compact, centered losers bracket to match winners bracket (square boxes) */

.lbViewport{
  /* slightly narrower than winners to fit comfortably */
  --colw: clamp(110px, 8.8vw, 142px);
  --gap:  clamp(16px, 2vw, 22px);

  /* square slot geometry */
  --slotH: 34px;
  --pairGapInside: 10px;
  --pairPad: 4px;

  /* full pair height */
  --pairH: calc(var(--slotH)*2 + var(--pairGapInside) + var(--pairPad)*2);

  /* tuned vertical rhythms so each round sits between feeders */
  --r1Space: 10px;                                       /* between R1 pairs */
  --r2Space: calc(var(--pairH) + 18px);                  /* between two R1s */
  --r3Space: calc(var(--pairH) + var(--r2Space) - 6px);  /* between two R2s */
  --r4Space: calc(var(--pairH) + var(--r3Space) - 10px); /* between two R3s */

  /* lines */
  --line: #2a2f36;
  --joinW: 2px;
  --stub: 10px;                 /* short stub leaving each pair */
  --arm:  calc(var(--gap) - var(--stub));

  /* box look (match winners bracket) */
  --slotBg: #f5f7fb;
  --slotBorder: #cfd7ea;
  --textDark: #0f1320;

  /* grid sizing: 7 columns */
  --stageW: calc(var(--colw) * 7 + var(--gap) * 6);
  --stageH: clamp(520px, 62vh, 700px);

  /* center + scale to fit */
  --topSpace: 120px;
  --fitW: calc(100vw / var(--stageW));
  --fitH: calc((100vh - var(--topSpace)) / var(--stageH));
  --scale: min(1, var(--fitW), var(--fitH));

  width:100%;
  height:calc(100vh - var(--topSpace));
  display:grid;
  place-items:center;
  overflow:visible;
}
.lbStage{
  width:var(--stageW);
  height:var(--stageH);
  transform:scale(var(--scale));
  transform-origin:top center;
}
.lbGrid{
  width:100%;
  height:100%;
  display:grid;
  grid-template-columns:repeat(7,var(--colw));
  gap:var(--gap);
  align-items:start;
}

/* columns / titles */
.round{ position:relative; }
.roundTitle{
  color:#dfe6f3; font-weight:900; font-size:12px;
  letter-spacing:.08em; text-transform:uppercase; margin-bottom:8px;
}
.stack{ position:relative; display:grid; }

/* vertical spacing â€” THIS aligns each round between feeders */
.r1  .pair{ margin: calc(var(--r1Space)/2) 0; }
.r2  .pair{ margin: calc(var(--r2Space)/2) 0; }
.r3a .pair{ margin: calc(var(--r3Space)/2) 0; }
.r3b .pair{ margin: calc(var(--r3Space)/2) 0; }
.r4  .pair{ margin: calc(var(--r4Space)/2) 0; }
.rFinal .pair{ margin: 28px 0; }

/* pair / slots */
.pair{
  position:relative;
  padding: var(--pairPad) 0;
}
.pair::after{
  /* short stub out toward next column */
  content:"";
  position:absolute; top:50%; right: calc(var(--stub) * -1);
  transform: translateY(-50%);
  width: var(--stub); height: var(--joinW);
  background: var(--line);
}
.slot{
  height: var(--slotH);
  border: 2px solid var(--slotBorder);
  border-radius: 0;      /* SQUARE */
  background: var(--slotBg);
  display:flex; align-items:center;
  padding: 0 10px;
  box-shadow: none;
}
.slot + .slot{ margin-top: var(--pairGapInside); }
.label{
  color: var(--textDark);
  font-weight: 700; font-size: 13px;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}

/* center-join arm shown on rounds that collect from a previous column */
.r2 .pair,
.r3a .pair,
.r3b .pair,
.r4 .pair,
.rFinal .pair{
  background-image:
    linear-gradient(var(--line), var(--line)),  /* vertical collector */
    linear-gradient(var(--line), var(--line));  /* horizontal arm */
  background-repeat: no-repeat, no-repeat;
  background-size:
    var(--joinW) calc(var(--slotH) + var(--pairGapInside)),
    var(--arm) var(--joinW);
  background-position:
    left calc(var(--gap) * -1 + var(--arm)) 50%,
    left calc(var(--gap) * -1)              50%;
}

/* LB winner pill */
.lbWinnerCol{
  display:flex; flex-direction:column; align-items:flex-start;
}
.lbWinnerTitle{
  color:#dfe6f3; font-weight:900; font-size:12px;
  letter-spacing:.08em; text-transform:uppercase; margin-bottom:8px;
}
.lbWinnerPill{
  min-width: var(--colw);
  background:#1c2952; border:2px solid #122040; color:#ffffff;
  border-radius:8px;
  padding:10px 16px;
  display:flex; align-items:center; justify-content:center;
}
.lbWinnerText{ font-weight:800; }
